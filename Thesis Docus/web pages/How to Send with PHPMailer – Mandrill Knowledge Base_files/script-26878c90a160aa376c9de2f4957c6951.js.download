/*
 * jQuery v1.9.1 included
 */

$(document).ready(function() {

//Change string for My Activities

$('.user-nav .my-activities').html('View support requests');

  
  // Hide the Contribution Link from My-Activities

$("nav.my-activities-nav").find('li:nth-child(2)').remove();
  
 $("nav.my-activities-nav").find('li:nth-child(0)').remove();

  
  
  // social share popups
  $(".share a").click(function(e) {
    e.preventDefault();
    window.open(this.href, "", "height = 500, width = 500");
  });

  // toggle the share dropdown in communities
  $(".share-label").on("click", function(e) {
    e.stopPropagation();
    var isSelected = this.getAttribute("aria-selected") == "true";
    this.setAttribute("aria-selected", !isSelected);
    $(".share-label").not(this).attr("aria-selected", "false");
  });

  $(document).on("click", function() {
    $(".share-label").attr("aria-selected", "false");
  });

  // show form controls when the textarea receives focus or backbutton is used and value exists
  var $answerbodyTextarea = $(".answer-body textarea"),
  $answerFormControls = $(".answer-form-controls"),
  $commentContainerTextarea = $(".comment-container textarea"),
  $commentContainerFormControls = $(".comment-form-controls");

  $answerbodyTextarea.one("focus", function() {
    $answerFormControls.show();
  });

  $commentContainerTextarea.one("focus", function() {
    $commentContainerFormControls.show();
  });

  if($commentContainerTextarea.val() !== "") {
    $commentContainerFormControls.show();
  }

  if($answerbodyTextarea.val() !== "") {
    $answerFormControls.show();
  }
  
    
//////////
// ARTICLE QUICKNAV
// By Rick Steele for Karmic Labs www.getdash.io
//////////
 
if($('.article-body span.wysiwyg-font-size-x-large').length > 2){
  // create an array to put menu text in
  var menuText = [];
 
  // Find all the headers that match the formatting we want, as a list
  // anchor-ify them
  $('.article-body span.wysiwyg-font-size-x-large').replaceWith(function() {
    // grab the heading text as a var
    var headingText = $.trim($(this).text());
    // add the text to the menu
    menuText.push(headingText);
    return '<a name="' + headingText + '" class="wysiwyg-font-size-x-large article-heading-link">' + headingText + '</a>';
});
 
  // create an empty menu holder
  $('.article-body').prepend('<div class="quickNavMenu"><h3>In This Article:</h3><ol></ol></div>');
 
  // turn that text into a menu
  $(menuText).each(function(index){
    $('.quickNavMenu ol').append('<li><a href="#' + menuText[index] + '">' + menuText[index] + '</a></li>');
  });
}; //  TOC: if >2 article headings

});